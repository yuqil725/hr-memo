(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{198:function(e,t,n){e.exports=n.p+"static/media/bg.b587a02b.png"},299:function(e,t,n){"use strict";n.r(t);var r=n(452),o=n(251),i=n(450),c=n(0),a=n.n(c),s=n(14),u=n(58),l=n(41),d=n(13),f=n(34),h="#FFFFFF",p="#757E90",b="#000000",y=f.default.get("window").width,g=f.default.get("window").height,j=d.default.create({city:{backgroundColor:h,padding:10,borderRadius:20,width:100,elevation:1,shadowOpacity:.05,shadowRadius:10,shadowColor:b,shadowOffset:{height:0,width:0}},cityText:{color:"#363636",fontSize:13,textAlign:"center"},filters:{backgroundColor:h,padding:10,borderRadius:20,width:90,elevation:1,shadowOpacity:.05,shadowRadius:10,shadowColor:b,shadowOffset:{height:0,width:0}},filtersText:{color:"#363636",fontSize:13,textAlign:"center"},containerMessage:{flex:1,alignItems:"center",justifyContent:"flex-start",flexDirection:"row",paddingHorizontal:10,width:y-100},avatar:{borderRadius:30,width:60,height:60,marginRight:20,marginVertical:15},message:{color:p,fontSize:12,paddingTop:5},bg:{flex:1,resizeMode:"cover",width:y,height:g},top:{paddingTop:50,marginHorizontal:10,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},title:{paddingBottom:10,fontSize:22,color:"#363636"},body:{fontSize:22,color:"#363636"},bodyBold:{fontSize:22,color:"#363636",fontWeight:"bold"},containerHome:{marginHorizontal:10,flex:1,height:"100%",width:"100%"},containerMatches:{justifyContent:"space-between",flex:1,paddingHorizontal:10},containerMessages:{justifyContent:"space-between",flex:1,paddingHorizontal:10},containerProfile:{marginHorizontal:0},photo:{height:g/2,width:y},topIconLeft:{paddingLeft:20},topIconRight:{paddingRight:20},actionsProfile:{justifyContent:"center",flexDirection:"row",alignItems:"center"},textButton:{fontSize:15,color:h,paddingLeft:5},circledButton:{width:50,height:50,borderRadius:25,backgroundColor:"#5636B8",justifyContent:"center",alignItems:"center",marginRight:10},roundedButtonPrimary:{justifyContent:"center",flexDirection:"row",alignItems:"center",marginLeft:10,marginRight:10,height:50,borderRadius:25,backgroundColor:"#5636B8",paddingHorizontal:20},roundedButtonSecondary:{justifyContent:"center",flexDirection:"row",alignItems:"center",marginLeft:10,marginRight:10,height:50,borderRadius:25,backgroundColor:"#D2EAEA",paddingHorizontal:20},tabButtonText:{textTransform:"uppercase"},iconMenu:{alignItems:"center",minWidth:200},checkboxBase:{width:24,height:24,justifyContent:"center",alignItems:"center",borderRadius:4,borderWidth:2,borderColor:b,backgroundColor:"transparent",marginRight:12},checkIcon:{alignSelf:"center",color:b},checkboxChecked:{borderWidth:2,borderColor:b},checkboxView:{flex:1,flexDirection:"row"}}),O=n(5),m=n.n(O),v=n(6),w=n.n(v),x=n(9),P=n.n(x),I=n(10),S=n.n(I),C=n(1),D=n.n(C),k=n(60),R=w()((function e(t,n){m()(this,e),this.apiEndpoint=t,this.projectId=n,this.client=new k.Client,this.client.setEndpoint(this.apiEndpoint).setProject(this.projectId),this.account=new k.Account(this.client)}));function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D()(e);if(t){var o=D()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S()(this,n)}}var T=function(e){P()(n,e);var t=E(n);function n(e,r){return m()(this,n),t.call(this,e,r)}return w()(n,[{key:"createAccount",value:function(e,t,n){return this.account.create("unique()",e,t,n)}},{key:"getAccount",value:function(){return this.account.get()}},{key:"createSession",value:function(e,t){return this.account.createEmailSession(e,t)}},{key:"listSession",value:function(){return this.account.listSessions()}},{key:"deleteCurrentSession",value:function(){return this.account.deleteSession("current")}},{key:"createSessionIfNoLogin",value:function(e,t,n){var r=this;this.listSession().then((function(e){console.log("Found existing sessions:",e),n&&n()}),(function(n){console.log("Didn't find session",n),r.createSession(e,t)}))}}]),n}(R),B=n(21),F=n(7),A=n(447),N=n(3),L=function(e){var t=e.color,n=e.name,r=e.size,o=e.style;return Object(N.jsx)(A.default,{name:n,size:r,color:t,style:o})},z=function(e){var t=e.focused,n=e.iconName,r=e.text,o=Object(l.useSelector)((function(e){return e.searchCardScreen})),i=t?"#5636B8":"#363636";return"Profile"==r&&""==o.selectedCard.documentId&&(i="#F7F3F0"),Object(c.useEffect)((function(){r=o.selectedCard.name}),[o.selectedCard.name]),Object(N.jsxs)(F.default,{style:j.iconMenu,children:[Object(N.jsx)(L,{name:n,size:16,color:i}),Object(N.jsx)(B.default,{style:[j.tabButtonText,{color:i}],children:"Profile"==r?o.selectedCard.name:r})]})},H="63a361ad7a9fe2d55146",V="63a35ca6807c7be8f650",M="63a361fa7032bed7fac1",_="63ab2a16216097f7c1bc",q="http://216.128.180.97/v1",W="zjlyq88@gmail.com",G="Zjlyq99880099225",$=n(2),U=n.n($);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee={name:"",documentId:"",imagePath:void 0},te={name:" ",documentId:" ",imagePath:void 0};function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce={profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{display:{name:""},meta:{documentId:""}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DISPLAY_PROFILE":return K(K({},e),{display:K(K({},e.display),t.payload)});case"CHANGE_META_PROFILE":return K(K({},e),{meta:K(K({},e.meta),t.payload)});default:return e}},profileScreenActivity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{friendshipDropdownOpen:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PROFILE_SCREEN_ACTIVITY":return Z(Z({},e),t.payload);default:return e}},searchCardScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectedCard:ee,searchCard:[ee],longPress:!1,searchText:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SEARCH_CARD_SCREEN":return Q(Q({},e),t.payload);case"CHANGE_SINGLE_SEARCH_CARD":var n=e.searchCard.map((function(e){return e.documentId==t.payload.documentId?Q(Q({},e),t.payload):e})),r=Q({},e.selectedCard);return r.documentId==t.payload.documentId&&(r=Q(Q({},r),t.payload)),Q(Q({},e),{},{selectedCard:r,searchCard:n});default:return e}},todoList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TODO":return ie(ie({},e),t.payload);default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SESSION":return re(re({},e),t.payload);default:return e}}},ae=n(281),se=Object(ae.configureStore)({reducer:ce,devTools:!0}),ue=n(18),le=n.n(ue),de=n(27),fe=n(95),he=n(61),pe=d.default.create({screenView:{flex:1,height:"100%",alignItems:"center",justifyContent:"center"},textInput:{flex:1,alignItems:"center",justifyContent:"center",flexDirection:"row",paddingHorizontal:10,width:200,borderWidth:2,borderRadius:15,fontSize:20,margin:10},textInputView:{height:150,flexShrink:20,alignItems:"center",backgroundColor:"transparent"},submitButton:{width:50,fontSize:22}}),be=function(e){return{type:"CHANGE_DISPLAY_PROFILE",payload:e}},ye=function(e){return{type:"CHANGE_PROFILE_SCREEN_ACTIVITY",payload:e}},ge=function(e){return{type:"CHANGE_SEARCH_CARD_SCREEN",payload:e}},je=function(e){return{type:"CHANGE_SINGLE_SEARCH_CARD",payload:e}},Oe=function(e){return{type:"CHANGE_TODO",payload:e}},me=function(e){var t=e.navigation,r=Object(c.useState)(""),o=le()(r,2),i=o[0],a=o[1],s=Object(c.useState)(""),l=le()(s,2),d=l[0],f=l[1],h=Object(c.useRef)(null);function p(){new T(q,V).createSessionIfNoLogin(i,d,(function(){se.dispatch({type:"CHANGE_SESSION",payload:{loggedIn:!0}})})),setTimeout((function(){t.navigate("Login")}),500)}return Object(de.useFocusEffect)(Object(c.useCallback)((function(){p()}),[])),Object(N.jsx)(F.default,{style:pe.screenView,children:Object(N.jsx)(fe.default,{source:n(198),children:Object(N.jsxs)(F.default,{style:pe.textInputView,children:[Object(N.jsx)(u.TextInput,{autoCompleteType:"email",placeholder:"email",style:pe.textInput,value:i,autoFocus:i.length>0||void 0,onChangeText:a}),Object(N.jsx)(u.TextInput,{autoCompleteType:"password",ref:h,placeholder:"password",secureTextEntry:!0,style:pe.textInput,value:d,onChangeText:f,onSubmitEditing:function(){p()},onLayout:function(){var e;null==(e=h.current)||e.focus()}}),Object(N.jsx)(he.default,{style:pe.submitButton,onPress:function(){p()},children:Object(N.jsx)(B.default,{children:"submit"})})]})})})},ve=n(20),we=n.n(ve),xe=n(293),Pe=n(116),Ie=n(74),Se=n(35),Ce=n(302);function De(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D()(e);if(t){var o=D()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S()(this,n)}}function ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D()(e);if(t){var o=D()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S()(this,n)}}function Re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D()(e);if(t){var o=D()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S()(this,n)}}var Ee=function(e){P()(n,e);var t=Re(n);function n(e,r,o,i){return m()(this,n),t.call(this,e,r,o,i)}return w()(n,[{key:"updateByDocumentId",value:function(e,t){var n=this;return this.queryByDocumentId(e).then((function(e){if(1===e.documents.length){var r=e.documents[0].$id;return n.updateDocument(r,t)}console.warn("Incorrect number of documents",e)}),(function(e){console.error(e)}))}}]),n}(function(e){P()(n,e);var t=ke(n);function n(e,r,o,i){var c;return m()(this,n),(c=t.call(this,e,r,o)).collectionId=i,c}return w()(n,[{key:"createDocument",value:function(e){return this.database.createDocument(this.databaseId,this.collectionId,k.ID.unique(),e)}},{key:"listDocument",value:function(){return this.database.listDocuments(this.databaseId,this.collectionId)}},{key:"updateDocument",value:function(e,t){return console.log("collection.tsx: Updating %s to %s",JSON.stringify(t),e),this.database.updateDocument(this.databaseId,this.collectionId,e,t)}},{key:"deleteDocument",value:function(e){return this.database.deleteDocument(this.databaseId,this.collectionId,e)}},{key:"queryDocument",value:function(e){return this.database.listDocuments(this.databaseId,this.collectionId,e)}},{key:"queryByDocumentId",value:function(e){return this.queryDocument([k.Query.equal("$id",e)])}}]),n}(function(e){P()(n,e);var t=De(n);function n(e,r,o){var i;return m()(this,n),(i=t.call(this,e,r)).databaseId=o,i.database=new k.Databases(i.client),i}return w()(n)}(R))),Te=n(306),Be=n(72),Fe=function(){var e=we()((function*(e,t){var n=yield fetch(e),r=yield n.blob();return new File([r],t,{type:r.type})}));return function(t,n){return e.apply(this,arguments)}}(),Ae=function(){var e=we()((function*(){return yield Te.launchImageLibraryAsync({mediaTypes:Be.MediaTypeOptions.All,allowsEditing:!0,aspect:[4,3],quality:1})}));return function(){return e.apply(this,arguments)}}();function Ne(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D()(e);if(t){var o=D()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S()(this,n)}}function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D()(e);if(t){var o=D()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S()(this,n)}}function ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D()(e);if(t){var o=D()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S()(this,n)}}var He=function(e){P()(n,e);var t=ze(n);function n(e,r,o){return m()(this,n),t.call(this,e,r,o)}return w()(n)}(function(e){P()(n,e);var t=Le(n);function n(e,r,o){var i;return m()(this,n),(i=t.call(this,e,r)).createFileFromWeb=function(){var e=we()((function*(e,t){var n=k.ID.unique();return i.storage.createFile(i.bucketId,n,yield Fe(e,t))}));return function(t,n){return e.apply(this,arguments)}}(),i.createFileFromIos=function(){var e=we()((function*(e,t){var n=/\.(\w+)$/.exec(e),r=n?"image/"+n[1]:"image",o=new FormData;return o.append("fileId","unique()"),o.append("file",{uri:e,name:t,type:r}),console.log("formData",o),i.sendXmlHttpRequest(o)}));return function(t,n){return e.apply(this,arguments)}}(),i.bucketId=o,i}return w()(n,[{key:"createFile",value:function(e,t,n){if(n)return this.storage.createFile(this.bucketId,k.ID.unique(),n);if("ios"===s.default.OS)return this.createFileFromIos(e,t);if("android"===s.default.OS)console.error("Haven't supported android");else if("web"===s.default.OS)return this.createFileFromWeb(e,t)}},{key:"createFileURL",value:function(){return q+"/storage/buckets/"+this.bucketId+"/files/"}},{key:"getFile",value:function(e){return this.storage.getFile(this.bucketId,e)}},{key:"getFilePreview",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.storage).getFilePreview.apply(t,[this.bucketId,e].concat(r))}},{key:"deleteFile",value:function(e){return this.storage.deleteFile(this.bucketId,e)}},{key:"sendXmlHttpRequest",value:function(e){var t=this,n=new XMLHttpRequest;return new Promise((function(r,o){n.onreadystatechange=function(e){4===n.readyState&&(console.log("xhr.status",n),201===n.status?r(JSON.parse(n.response)):o("Request Failed"))},n.open("POST",q+"/storage/buckets/"+t.bucketId+"/files/"),n.withCredentials=!0,n.setRequestHeader("X-Appwrite-Project",t.projectId),n.setRequestHeader("X-Appwrite-Response-Format","0.15.0"),n.setRequestHeader("x-sdk-version","appwrite:web:9.0.1"),n.send(e)}))}}]),n}(function(e){P()(n,e);var t=Ne(n);function n(e,r){var o;return m()(this,n),(o=t.call(this,e,r)).storage=new k.Storage(o.client),o}return w()(n)}(R))),Ve=n(47),Me=n(16),_e=d.default.create({containerCardItem:{backgroundColor:h,borderRadius:8,alignItems:"center",margin:0,elevation:1,shadowOpacity:.05,shadowRadius:10,shadowColor:b,shadowOffset:{height:0,width:0},flexDirection:"row"},matchesCardItem:{marginTop:-35,backgroundColor:"#5636B8",paddingVertical:7,paddingHorizontal:20,borderRadius:20},matchesTextCardItem:{color:h},descriptionCardItem:{color:p,textAlign:"center"},status:{paddingBottom:10,flexDirection:"row",alignItems:"center"},statusText:{color:p,fontSize:12},online:{width:6,height:6,backgroundColor:"#46A575",borderRadius:3,marginRight:4},offline:{width:6,height:6,backgroundColor:"#D04949",borderRadius:3,marginRight:4},actionsCardItem:{flexDirection:"row",alignItems:"center",paddingVertical:30},button:{width:60,height:60,borderRadius:30,backgroundColor:h,marginHorizontal:7,alignItems:"center",justifyContent:"center",elevation:1,shadowOpacity:.15,shadowRadius:20,shadowColor:"#363636",shadowOffset:{height:10,width:0}},miniButton:{width:40,height:40,borderRadius:30,backgroundColor:h,marginHorizontal:7,alignItems:"center",justifyContent:"center",elevation:1,shadowOpacity:.15,shadowRadius:20,shadowColor:"#363636",shadowOffset:{height:10,width:0}},nameView:{flex:1}}),qe=n(449);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $e=function(e){var t=f.default.get("window").width,n={borderRadius:8,width:e.oneline?40:t/2-30,height:e.oneline?40:170},r=Object(c.useRef)(new Me.default.Value(0)),o=Object(l.useSelector)((function(e){return e.searchCardScreen})),i=Me.default.loop(Me.default.sequence([Me.default.timing(r.current,{toValue:-2,duration:25,useNativeDriver:!1}),Me.default.timing(r.current,{toValue:2,duration:25,useNativeDriver:!1}),Me.default.timing(r.current,{toValue:0,duration:25,useNativeDriver:!1})]),{iterations:-1});Object(c.useEffect)((function(){o.longPress&&e.imagePath?i.start():i.reset()}),[o.longPress]);var a=new Ee(q,V,H,M),s=new He(q,V,_);return Object(N.jsxs)(Me.default.View,{style:{transform:[{rotate:r.current.interpolate({inputRange:[-1,1],outputRange:["-0.005rad","0.005rad"]})}]},children:[Object(N.jsxs)(F.default,{style:Ge({},_e.containerCardItem),children:[e.imagePath&&e.imagePath.length>0?Object(N.jsx)(Ve.default,{source:{uri:s.getFilePreview(e.imagePath).toString()},style:n}):void 0,e.imagePath&&0===e.imagePath.length?Object(N.jsx)(F.default,{style:Ge(Ge({},n),{},{justifyContent:"center",alignItems:"center"})}):void 0,e.imagePath?void 0:Object(N.jsx)(Se.default,{onPress:function(){o.longPress||(console.log("Creating a new namecard"),a.createDocument({Name:te.name}).then((function(e){se.dispatch(ge({renderScreen:Math.random()}))}),(function(e){console.error(e)})))},children:Object(N.jsx)(F.default,{style:Ge(Ge({},n),{},{justifyContent:"center",alignItems:"center"}),children:Object(N.jsx)(A.default,{name:"ios-person-add",size:e.oneline?40:120,color:p})})}),Object(N.jsx)(F.default,{style:Ge(Ge({},_e.nameView),{},{paddingLeft:e.oneline?10:void 0}),children:Object(N.jsx)(B.default,{style:[{paddingTop:10,paddingBottom:5,color:"#363636",fontSize:15}],children:e.name})})]}),o.longPress&&e.imagePath?Object(N.jsx)(qe.default,{name:"remove",size:25,color:"red",style:{alignSelf:"flex-end",marginTop:-2,position:"absolute"}}):void 0]})};function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ke=function(e){var t=e.image,n=e.lastMessage,r=e.name,o=e.disabled,i=e.onPress;return Object(N.jsx)(Se.default,{onPress:i,children:Object(N.jsxs)(F.default,{style:Ye(Ye({},j.containerMessage),{},{opacity:o?.5:void 0}),children:[Object(N.jsx)(Ve.default,{source:{uri:t},style:j.avatar}),Object(N.jsxs)(F.default,{children:[Object(N.jsx)(B.default,{children:r}),Object(N.jsx)(B.default,{style:Ye(Ye({},j.message),{},{textDecorationLine:o?"line-through":void 0}),children:n})]})]})})},Xe=d.default.create({containerProfileItem:{backgroundColor:h,paddingHorizontal:10,paddingBottom:25,margin:20,borderRadius:8,marginTop:-65,elevation:1,shadowOpacity:.05,shadowRadius:10,shadowColor:b,shadowOffset:{height:0,width:0}},matchesProfileItem:{width:135,marginTop:-15,backgroundColor:"#5636B8",paddingVertical:7,paddingHorizontal:20,borderRadius:20,alignSelf:"center"},matchesTextProfileItem:{color:h,textAlign:"center"},name:{paddingTop:25,paddingBottom:5,color:"#363636",fontSize:15,textAlign:"center"},descriptionProfileItem:{color:p,textAlign:"center",paddingBottom:20,fontSize:13},infoList:{paddingVertical:8,justifyContent:"center",flexDirection:"row"},iconProfile:{fontSize:12,color:"#363636",paddingHorizontal:10},infoSectionView:{paddingTop:8,justifyContent:"center",zIndex:-1},infoSectionTitleView:{justifyContent:"flex-end"},infoSectionContent:{flex:1,justifyContent:"flex-start"},infoSectionText:{color:p,fontSize:18},infoContent:{width:"100%",color:"#363636",fontSize:18}}),Ze={Name:"name",FriendshipStage:"friendshipStage",LivingAddress:"livingAddress",Education:"education",Activity:"activity",Comment:"comment",Todo:"todo",ImagePath:"imagePath"},Je={$id:"documentId"},Qe=n(288);function et(e){return e?e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return e.toUpperCase()})).replace(/\s+/g,""):""}var tt=function(e){return"_"===(e=e.replace(/\W+/g," ").toLowerCase().split(" ").join("_")).charAt(e.length-1)?e.substring(0,e.length-1):e},nt=function(e){return e=e.trimStart(),/^[A-Za-z0-9 ]*$/.test(e)?e.toLowerCase():(t=e,Object(Qe.default)(t,{pinyinOnly:!1}).join(""));var t};function rt(e,t){for(var n=0;e&&e.slice(n).startsWith("-");)n+=1,e=e.slice(n);return t&&(e="-"+e),e}var ot=n(53),it=n(301),ct={"Role Delimited Interaction":{description:"I only meet these people under certain role context; e.g. a stranger sitting near you in a lecture",example:"Karim Keddam"},"Friendly Relation":{description:"Still role delimited, but generally more positive; e.g. coworkers, religious association members, neighbors",example:"Leah Wang"},"Move-Toward-Friendship":{description:"Moving away from what is required in the specific role relationship; Fewer stereotyped lines of interaction; Individual violation of public propriety; e.g. A invited B to get coffee after class, and the other day, B asked A to get lunch after class.",example:"Chufeng (Chris) Liang"},"Nascent Friendship":{description:"100% moved away from specific role; Start to develop norms; Start to be regarded as a pair by the outside forces; May be less faithful to the original friendship.",example:null},"Stabilized Friendship::Active":{description:"Less passion as Nascent friendship; When seeing another new Nascent friend of your \u201cduo\u201d, it isn\u2019t going to impact the strength of the relationship; The person can be available for you.",example:"Xin Zhang"},"Stabilized Friendship::Dormant":{description:"Less passion as Nascent friendship; When seeing another new Nascent friend of your \u201cduo\u201d, it isn\u2019t going to impact the strength of the relationship; No interact every day, but still very much alive and grow back to an active friendship if time arises",example:"Lounan Li"},"Stabilized Friendship::Commemorative":{description:"Less passion as Nascent friendship; When seeing another new Nascent friend of your \u201cduo\u201d, it isn\u2019t going to impact the strength of the relationship; Ones reflect a specific space and time with minimal interaction, can\u2019t grow back to an active friendship easily",example:"Zhiyan Fang"}},at={Name:"name",$id:"documentId",ImagePath:"imagePath"},st=function(e){var t=new Date(e).getDate(),n=new Date(e).getMonth()+1;return"["+new Date(e).getFullYear()+"/"+n+"/"+t+"]"},ut=n(12),lt=n.n(ut),dt=n(120),ft=n(96),ht=d.default.create({centeredModel:{flex:1,justifyContent:"center",alignItems:"center",marginTop:15},modalView:{margin:20,backgroundColor:"white",borderRadius:20,padding:35,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5}}),pt={key:Ze.Activity,index:0};function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gt=function(e){var t=e.value,n=e.valueHandler,r=e.k,o=e.profileItem,i=Object(c.useState)(void 0),s=le()(i,2),u=s[0],d=s[1],f=new Ee(q,V,H,M);function p(e){var t;return(null==(t=y.focusItem)?void 0:t.k)==r&&y.focusItem.index==e?g:y.focusItem&&g.current?void 0:r==pt.key&&e==pt.index?g:void 0}function b(e,n,r){Object.values(Ze);return n+r==-1?{k:e,index:t.length-1}:n+r==t.length?{k:e,index:0}:{k:e,index:n+r}}var y=Object(l.useSelector)((function(e){return e.profileScreenActivity})),g=Object(c.useRef)(null);return Object(N.jsx)(N.Fragment,{children:t.map((function(e,i){return Object(N.jsxs)(a.a.Fragment,{children:[Object(N.jsx)(ft.default,{animationType:"slide",transparent:!0,visible:void 0!=u,onRequestClose:function(){dt.default.alert("Modal has been closed."),d(void 0)},children:Object(N.jsx)(F.default,{style:ht.centeredModel,children:Object(N.jsxs)(F.default,{style:ht.modalView,children:[Object(N.jsx)(B.default,{style:j.title,children:"Are you sure you want to delete?"}),Object(N.jsxs)(F.default,{style:{flexDirection:"row"},children:[Object(N.jsx)(he.default,{style:j.roundedButtonSecondary,onPress:function(){var e=U()({},et(u.key),u.data);f.updateDocument(o.meta.documentId,e),se.dispatch(be(U()({},u.key,u.data))),d(void 0)},children:Object(N.jsx)(B.default,{style:yt(yt({},j.bodyBold),{},{color:h}),children:"Yes"})}),Object(N.jsx)(he.default,{style:j.roundedButtonPrimary,onPress:function(){d(void 0)},children:Object(N.jsx)(B.default,{style:yt(yt({},j.bodyBold),{},{color:h}),children:"No"})})]})]})})}),Object(N.jsx)(F.default,{style:Xe.infoList,children:Object(N.jsx)(ot.default,{ref:p(i),returnKeyType:"done",keyboardType:"default",value:n(e),placeholder:"New field",placeholderTextColor:"#E6E6E6",onBlur:function(e){var n=lt()(t);n[i]=e.nativeEvent.text,i>0&&0==n[i].length&&n.splice(i,1);var c=U()({},et(r),n);f.updateDocument(o.meta.documentId,c),n&&n.length>0&&""!=n.at(0)&&(n=[""].concat(lt()(n))),se.dispatch(be(U()({},r,n)))},onFocus:function(){se.dispatch(ye({focusItem:{k:r,index:i}}))},onKeyPress:function(e){switch(e.nativeEvent.key){case"ArrowDown":return se.dispatch(ye({focusItem:b(r,i,1)})),void setTimeout((function(){g.current&&g.current.focus()}),50);case"ArrowUp":return se.dispatch(ye({focusItem:b(r,i,-1)})),void setTimeout((function(){g.current&&g.current.focus()}),50)}},onLayout:function(){g.current&&g.current.focus()},onChangeText:function(e){var n=lt()(t);n[i]=e,se.dispatch(be(U()({},r,n)))},onSubmitEditing:function(e){var n=lt()(t);i>0&&0==n[i].length?(n.splice(i,1),se.dispatch(ye({focusItem:b(r,i,-1)}))):(n.splice(i+1,0,""),se.dispatch(ye({focusItem:{k:r,index:Math.min(Math.max(i+1,2),n.length-1)}}))),se.dispatch(be(U()({},r,n)))},style:Xe.infoContent})})]},i)}))})};function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt=function(e){var t=e.checked,n=e.onChecked,r=e.textInputProps;return Object(N.jsxs)(F.default,{style:j.checkboxView,children:[Object(N.jsx)(he.default,{style:[j.checkboxBase,t&&j.checkboxChecked],onPress:n,children:t?Object(N.jsx)(A.default,{name:"checkmark",size:20,style:j.checkIcon}):void 0}),Object(N.jsx)(u.TextInput,Ot(Ot({},r),{},{style:Ot(Ot({},r.style),{},{textDecorationLine:t?"line-through":void 0})}))]})};function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xt=function(e){var t=e.value,n=e.valueHandler,r=e.k,o=e.profileItem,i=Object(c.useState)(void 0),s=le()(i,2),u=s[0],d=s[1],f=new Ee(q,V,H,M);function p(e){var t;return(null==(t=y.focusItem)?void 0:t.k)==r&&y.focusItem.index==e?g:y.focusItem&&g.current?void 0:r==pt.key&&e==pt.index?g:void 0}function b(e,n,r){Object.values(Ze);return n+r==-1?{k:e,index:t.length-1}:n+r==t.length?{k:e,index:0}:{k:e,index:n+r}}var y=Object(l.useSelector)((function(e){return e.profileScreenActivity})),g=Object(c.useRef)(null);return Object(N.jsx)(N.Fragment,{children:t.map((function(e,i){var c=e&&e.startsWith("-");return Object(N.jsxs)(a.a.Fragment,{children:[Object(N.jsx)(ft.default,{animationType:"slide",transparent:!0,visible:void 0!=u,onRequestClose:function(){dt.default.alert("Modal has been closed."),d(void 0)},children:Object(N.jsx)(F.default,{style:ht.centeredModel,children:Object(N.jsxs)(F.default,{style:ht.modalView,children:[Object(N.jsx)(B.default,{style:j.title,children:"Are you sure you want to delete?"}),Object(N.jsxs)(F.default,{style:{flexDirection:"row"},children:[Object(N.jsx)(he.default,{style:j.roundedButtonSecondary,onPress:function(){var e=U()({},et(u.key),u.data);f.updateDocument(o.meta.documentId,e),se.dispatch(be(U()({},u.key,u.data))),d(void 0)},children:Object(N.jsx)(B.default,{style:wt(wt({},j.bodyBold),{},{color:h}),children:"Yes"})}),Object(N.jsx)(he.default,{style:j.roundedButtonPrimary,onPress:function(){d(void 0)},children:Object(N.jsx)(B.default,{style:wt(wt({},j.bodyBold),{},{color:h}),children:"No"})})]})]})})}),Object(N.jsx)(F.default,{style:Xe.infoList,children:Object(N.jsx)(mt,{checked:c,onChecked:function(){var n=rt(e,!c),a=lt()(t);a[i]=n,se.dispatch(be(U()({},r,a))),i>0&&0==a[i].length&&a.splice(i,1);var s=U()({},et(r),a);f.updateDocument(o.meta.documentId,s)},textInputProps:{ref:p(i),returnKeyType:"done",keyboardType:"default",value:n(rt(e,!1)),placeholder:"New field",placeholderTextColor:"#E6E6E6",onBlur:function(e){var n=lt()(t);n[i]=e.nativeEvent.text,i>0&&0==n[i].length&&n.splice(i,1);var c=U()({},et(r),n);f.updateDocument(o.meta.documentId,c),n&&n.length>0&&""!=n.at(0)&&(n=[""].concat(lt()(n))),se.dispatch(be(U()({},r,n)))},onFocus:function(){se.dispatch(ye({focusItem:{k:r,index:i}}))},onKeyPress:function(e){switch(e.nativeEvent.key){case"ArrowDown":return se.dispatch(ye({focusItem:b(r,i,1)})),void setTimeout((function(){g.current&&g.current.focus()}),50);case"ArrowUp":return se.dispatch(ye({focusItem:b(r,i,-1)})),void setTimeout((function(){g.current&&g.current.focus()}),50)}},onLayout:function(){g.current&&g.current.focus()},onChangeText:function(e){var n=lt()(t);n[i]=e,se.dispatch(be(U()({},r,n)))},onSubmitEditing:function(e){var n=lt()(t);i>0&&0==n[i].length?(n.splice(i,1),se.dispatch(ye({focusItem:b(r,i,-1)}))):(n.splice(i+1,0,""),se.dispatch(ye({focusItem:{k:r,index:Math.min(Math.max(i+1,2),n.length-1)}}))),se.dispatch(be(U()({},r,n)))},style:Xe.infoContent}})})]},i)}))})},Pt=function(e,t,n,r){var o=new Ee(q,V,H,M),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.startsWith(t)&&(e=st(Date.now())+e),e};switch(typeof r){case"string":return Object(N.jsx)(ot.default,{value:r,onBlur:function(t){var r=t.nativeEvent.text.trimStart(),i=U()({},et(n),r);o.updateDocument(e.meta.documentId,i),Object.values(at).includes(n)&&se.dispatch(je(U()({documentId:e.meta.documentId},n,r)))},onChangeText:function(e){se.dispatch(be(U()({},n,e)))},style:Xe.infoContent});case"object":switch(n){case Ze.FriendshipStage:return Object(N.jsx)(it.default,{multiple:!0,autoScroll:!0,mode:"BADGE",extendableBadgeContainer:!0,textStyle:Xe.infoContent,style:{borderWidth:0,paddingLeft:0,paddingTop:0,paddingBottom:0},open:t.friendshipDropdownOpen,value:e.display.friendshipStage?e.display.friendshipStage:null,items:Object.keys(ct).map((function(e,t){return{label:e,value:e}})),setOpen:function(){se.dispatch(ye({friendshipDropdownOpen:!t.friendshipDropdownOpen}))},setValue:function(t){return t(e.display.friendshipStage)},onSelectItem:function(t){var r=t.map((function(e,t){return e.value}));se.dispatch(be(U()({},n,r))),o.updateDocument(e.meta.documentId,U()({},et(n),r))}});case Ze.ImagePath:return;case Ze.Todo:return Object(N.jsx)(xt,{value:r,valueHandler:i,k:n,profileItem:e});default:if(n)return r&&0!==r.length||(r=[""]),Object(N.jsx)(gt,{value:r,valueHandler:i,k:n,profileItem:e})}}};function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ct=function(){var e=Object(l.useSelector)((function(e){return e.profile})),t=e.display,n=Object(l.useSelector)((function(e){return e.profileScreenActivity}));return Object(N.jsx)(F.default,{style:Xe.containerProfileItem,children:Object.values(t).map((function(r,o){if("$"!==Object.keys(t).at(o).at(0)&&Object.keys(t).at(o)!==Ze.ImagePath)return Object(N.jsxs)(F.default,{style:St(St({},Xe.infoSectionView),{},{zIndex:Object.keys(t).at(o)===Ze.FriendshipStage?1:0}),children:[Object(N.jsx)(F.default,{style:Xe.infoSectionTitleView,children:Object(N.jsxs)(B.default,{style:Xe.infoSectionText,children:[et(Object.keys(t).at(o)),":\xa0"]})}),Object(N.jsx)(F.default,{style:Xe.infoSectionContent,children:Pt(e,n,Object.keys(t).at(o),r)})]},o)}))})},Dt=n(289),kt=function(e){return Object(N.jsx)(Se.default,{onPress:e.onPressCallback,children:Object(N.jsx)(Dt.FileUploader,{onDrop:e.onDrop,children:Object(N.jsx)(fe.default,{source:{uri:e.url},style:j.photo})})})};function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tt=function(e,t){return Object.keys(t).reduce((function(t,n){return Object.keys(e).includes(n)?Et(Et({},t),U()({},n,e[n])):Et({},t)}),{})},Bt=function(e,t){return Object.keys(e).reduce((function(n,r){return Et(Et({},n),U()({},t[r]||r,e[r]))}),{})},Ft=function(e){return e.filter((function(e){return e&&e.length>0}))},At=function(e){var t=e.navigation,n=new Ee(q,V,H,M),r=new He(q,V,_),o=Object(l.useSelector)((function(e){return e.searchCardScreen})),i=Object(l.useSelector)((function(e){return e.profile})),a=function(){var e=we()((function*(e,t,o){i.display.imagePath.map((function(e){r.deleteFile(e)})),console.log("Uploading new image");var c=[(yield r.createFile(e,t,o)).$id];se.dispatch(be({imagePath:c})),se.dispatch(je({documentId:i.meta.documentId,imagePath:c})),n.updateByDocumentId(i.meta.documentId,{ImagePath:c})}));return function(t,n,r){return e.apply(this,arguments)}}(),s=function(){var e=we()((function*(){var e=yield Ae(),t=tt(i.display.name+" 1");e.canceled||a(e.assets[0].uri,t)}));return function(){return e.apply(this,arguments)}}(),u=function(){var e=we()((function*(e){console.log("received dropping file",e);var t=tt(i.display.name+" 1");a("",t,e)}));return function(t){return e.apply(this,arguments)}}(),d=Object(c.useState)(!1),f=le()(d,2),p=f[0],b=f[1];Object(de.useFocusEffect)(Object(c.useCallback)((function(){o.selectedCard.documentId&&o.selectedCard.documentId!==ee.documentId&&o.selectedCard.documentId!==te.documentId&&n.queryByDocumentId(o.selectedCard.documentId).then((function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["imagePath","education","livingAddress"];return Object.keys(e).reduce((function(n,r){if(Array.isArray(e[r])&&!t.includes(r)){var o=[""].concat(lt()(Ft(e[r])));return Et(Et({},n),U()({},r,o))}return Et(Et({},n),U()({},r,e[r]))}),{})}(Bt(Tt(e.documents[0],Ze),Ze)),n=Bt(Tt(e.documents[0],Je),Je);console.log("set profile state",{display:t,meta:n}),se.dispatch(be(t)),se.dispatch({type:"CHANGE_META_PROFILE",payload:n})}),(function(e){console.error(e)}));b(!1)}),[o.selectedCard.documentId,p]));return Object(N.jsx)(xe.default,{behavior:"position",style:{height:"100%",alignItems:"center"},children:Object(N.jsxs)(Ie.default,{refreshControl:Object(N.jsx)(Pe.default,{refreshing:p,onRefresh:function(){b(!0)}}),style:j.containerProfile,children:[Object(N.jsx)(Ce.default,{style:{flex:1},onSwipeRight:function(){t.goBack()},children:Object(N.jsx)((function(){return Object(N.jsx)(kt,{onPressCallback:we()((function*(){return console.log("Opening photo library"),yield s()})),url:i.display.imagePath&&i.display.imagePath.length>0?r.getFilePreview(i.display.imagePath.at(0)).toString():void 0,onDrop:u})}),{})}),Object(N.jsxs)(F.default,{style:j.top,children:[Object(N.jsx)(Se.default,{children:Object(N.jsx)(L,{name:"chevron-back",size:20,color:h,style:j.topIconLeft})}),Object(N.jsx)(Se.default,{children:Object(N.jsx)(L,{name:"ellipsis-vertical",size:20,color:h,style:j.topIconRight})})]}),Object(N.jsx)(Ct,{})]})})},Nt=n(185);function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ht=function(e){var t=e.navigation,r=new Ee(q,V,H,M),o=Object(l.useSelector)((function(e){return e.searchCardScreen})),i=Object(c.useState)(!1),a=le()(i,2),s=a[0],d=a[1];Object(de.useFocusEffect)(Object(c.useCallback)((function(){r.listDocument().then((function(e){var t={searchCard:e.documents.map((function(e){return Bt(Tt(e,at),at)})).sort((function(e,t){return nt(e.name)<nt(t.name)?-1:1})),selectedCard:ee};if(o.selectedCard.documentId!=ee.documentId){var n=t.searchCard.filter((function(e){return e.documentId==o.selectedCard.documentId}));1==n.length&&(t.selectedCard=n.at(0))}t.searchCard.unshift(te),console.log("set search state",t),se.dispatch(ge(t))}),(function(e){console.error(e)})),d(!1)}),[o.renderScreen]));var f=Object(c.useRef)(null);return Object(N.jsx)(fe.default,{source:n(198),style:j.bg,children:Object(N.jsxs)(F.default,{style:j.containerMatches,children:[Object(N.jsx)(F.default,{style:j.top,children:Object(N.jsx)(u.TextInput,{ref:f,placeholder:"Search name",onLayout:function(){f.current.focus()},style:j.title,value:o.searchText,onChangeText:function(e){(se.dispatch(ge({searchText:e}))," "===e)&&(console.log("Creating a new namecard"),r.createDocument({Name:te.name}).then((function(e){se.dispatch(ge({renderScreen:Math.random(),selectedCard:{name:e.Name,documentId:e.$id,imagePath:e.ImagePath}}))}),(function(e){console.error(e)})),t.navigate("Profile"),se.dispatch(ge({searchText:""})))}})}),Object(N.jsx)(Nt.default,{keyboardDismissMode:"on-drag",refreshControl:Object(N.jsx)(Pe.default,{refreshing:s,onRefresh:function(){se.dispatch(ge({renderScreen:Math.random()})),d(!0)}}),sections:function(e){var t=e.reduce((function(e,t){var n=nt(t.name);n.startsWith(o.searchText?o.searchText.toLowerCase():" ");var r=n.at(0)?n.at(0):"";return e[r]=e[r]||[],e[r].push(t),e}),{});return Object.keys(t).map((function(e){return{title:e.toUpperCase(),data:t[e]}}))}(o.searchCard),renderSectionHeader:function(e){var t=e.section.title;return Object(N.jsx)(B.default,{style:j.title,children:t})},keyExtractor:function(e,t){return t.toString()},renderItem:function(e){var n=e.item;return Object(N.jsxs)(Se.default,{onPress:function(){se.dispatch(ge({selectedCard:n})),o.longPress||t.navigate("Profile")},onLongPress:function(){se.dispatch(ge({longPress:!o.longPress}))},style:{flex:1},children:[Object(N.jsx)($e,zt(zt({},n),{},{oneline:!0})),Object(N.jsx)(F.default,{style:ht.centeredModel,children:Object(N.jsx)(ft.default,{animationType:"slide",transparent:!0,visible:o.longPress&&o.selectedCard.documentId==n.documentId,onRequestClose:function(){dt.default.alert("Modal has been closed."),se.dispatch(ge({selectedCard:ee}))},children:Object(N.jsx)(F.default,{style:ht.centeredModel,children:Object(N.jsxs)(F.default,{style:ht.modalView,children:[Object(N.jsxs)(B.default,{style:j.title,children:["Are you sure you want to delete"," ",Object(N.jsxs)(B.default,{style:j.bodyBold,children:[n.name,"'s"]})," ","namecard?"]}),Object(N.jsxs)(F.default,{style:{flexDirection:"row"},children:[Object(N.jsx)(he.default,{style:j.roundedButtonSecondary,onPress:function(){console.log("Deleting card",n),r.deleteDocument(n.documentId);var e=lt()(o.searchCard).filter((function(e){return e.documentId!=n.documentId}));se.dispatch(ge({searchCard:e,selectedCard:ee}))},children:Object(N.jsx)(B.default,{style:zt(zt({},j.bodyBold),{},{color:h}),children:"Yes"})}),Object(N.jsx)(he.default,{style:j.roundedButtonPrimary,onPress:function(){return se.dispatch(ge({selectedCard:ee}))},children:Object(N.jsx)(B.default,{style:zt(zt({},j.bodyBold),{},{color:h}),children:"No"})})]})]})})})})]})}})]})})},Vt=d.default.create({todoSection:{flex:1,alignSelf:"center",flexDirection:"row",marginTop:80,width:y-50,position:"relative"},switchView:{position:"absolute",right:0,zIndex:20,flexDirection:"row",alignItems:"center"},todoFlatList:{paddingTop:30},highlightDateView:{backgroundColor:"#CEDFD9",borderRadius:10,padding:10},normalDateView:{padding:10}});function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qt=function(e){var t=Object(l.useSelector)((function(e){return e.todoList})),n=new He(q,V,_),r=new Ee(q,V,H,M),o=st(Date.now()).slice(1,-1),i=Object(c.useState)(!1),a=le()(i,2),s=a[0],d=a[1],f=Object(c.useState)(0),b=le()(f,2),y=(b[0],b[1]),g=Object(c.useRef)(null);return Object(N.jsxs)(F.default,{style:Vt.todoSection,children:[Object(N.jsxs)(F.default,{style:Vt.switchView,children:[Object(N.jsx)(B.default,{style:j.bodyBold,children:"Show All "}),Object(N.jsx)(u.Switch,{trackColor:{false:"#D2EAEA",true:"#5636B8"},thumbColor:s?h:"#F7F3F0",ios_backgroundColor:p,onValueChange:function(){return d((function(e){return!e}))},value:s})]}),Object(N.jsx)(F.default,{style:{flex:1},children:Object(N.jsx)(u.ScrollView,{style:Vt.todoFlatList,ref:g,refreshControl:e,children:Object.keys(t).map((function(e,i){return Object(N.jsx)(Se.default,{onLayout:function(t){var n=t.nativeEvent.layout;e==o&&(y(n.y),g.current.scrollTo({y:n.y,animated:!0}))},children:Object(N.jsxs)(F.default,{style:o==e?Vt.highlightDateView:Vt.normalDateView,children:[Object(N.jsx)(F.default,{children:Object(N.jsx)(B.default,{style:j.title,children:e})}),t[e].map((function(o,i){return s||!s&&!o.disabled?Object(N.jsx)(Ke,{image:o.imagePath?n.getFilePreview(o.imagePath).toString():void 0,name:o.name,lastMessage:(c=o.todo,c.startsWith("-")||c.startsWith("[")?c.slice(c.indexOf("]")+2).trimStart():c.trimStart()),disabled:o.disabled,onPress:function(){!function(e,t,n,r){var o=t.map((function(e,t){if(t==n){var r=_t({},e);return r.disabled=!r.disabled,r}return _t({},e)}));se.dispatch(Oe(U()({},e,o))),r.queryByDocumentId(t[n].documentId).then((function(e){var o=Bt(Tt(e.documents[0],Ze),Ze).todo.map((function(e){return t[n].todo==e?rt(t[n].todo,!t[n].disabled):e}));r.updateByDocumentId(t[n].documentId,{Todo:o})}),(function(e){console.error(e)}))}(e,t[e],i,r)}},i):void 0;var c}))]})},i)}))})})]})},Wt={$id:"documentId",Name:"name",Todo:"todo",ImagePath:"imagePath"},Gt=function(e){e.navigation;var t=new Ee(q,V,H,M),r=Object(c.useState)(!1),o=le()(r,2),i=o[0],a=o[1];return Object(de.useFocusEffect)(Object(c.useCallback)((function(){t.listDocument().then((function(e){var t=e.documents.map((function(e){return Bt(Tt(e,Wt),Wt)}));se.dispatch(Oe(function(e){var t={};return e.map((function(e){e.todo&&e.todo.length>0&&e.todo.map((function(n){if(n&&n.length>0){var r="Unknown",o=!1;if("["==n.at(0)){var i=n.indexOf("]");r=n.slice(1,i)}else if("-"==n.at(0)){if("["==n.at(1)){var c=n.indexOf("]");r=n.slice(2,c)}o=!0}var a={documentId:e.documentId,name:e.name,todo:n,imagePath:e.imagePath?e.imagePath.at(0):void 0,disabled:o};t[r]&&0!=t[r].length?t[r].push(a):t[r]=[a]}}))})),Object.keys(t).sort((function(e,t){return t.localeCompare(e)})).reduce((function(e,n){return e[n]=t[n],e}),{})}(t)))}),(function(e){console.error(e)})),a(!1)}),[i])),Object(N.jsx)(fe.default,{source:n(198),style:j.bg,children:qt(Object(N.jsx)(u.RefreshControl,{refreshing:i,onRefresh:function(){a(!0)}}))})},$t="ios"==s.default.OS;$t&&new T(q,V).createSessionIfNoLogin(W,G);t.default=function(){var e=Object(i.default)(),t=Object(r.default)();return Object(N.jsx)(l.Provider,{store:se,children:Object(N.jsx)(o.default,{children:Object(N.jsx)(e.Navigator,{children:Object(N.jsx)(e.Screen,{name:"Tab",options:{headerShown:!1,animationEnabled:!1},children:function(){var e=Object(l.useSelector)((function(e){return e.session}));return Object(N.jsx)(u.GestureHandlerRootView,{style:{flex:1},children:Object(N.jsx)(t.Navigator,{tabBarOptions:{showLabel:!1,activeTintColor:"#5636B8",inactiveTintColor:"#363636",labelStyle:{fontSize:14,textTransform:"uppercase",paddingTop:10},style:{backgroundColor:h,borderTopWidth:0,marginBottom:0,shadowOpacity:.05,shadowRadius:10,shadowColor:b,shadowOffset:{height:0,width:0}}},children:e.loggedIn||$t?Object(N.jsxs)(a.a.Fragment,{children:[Object(N.jsx)(t.Screen,{name:"Search",component:Ht,options:{tabBarIcon:function(e){var t=e.focused;return Object(N.jsx)(z,{focused:t,iconName:"search",text:"Search"})}}}),Object(N.jsx)(t.Screen,{name:"Profile",component:At,options:{tabBarIcon:function(e){var t=e.focused;return Object(N.jsx)(z,{focused:t,iconName:"person",text:"Profile"})}}}),Object(N.jsx)(t.Screen,{name:"Todo",component:Gt,options:{tabBarIcon:function(e){var t=e.focused;return Object(N.jsx)(z,{focused:t,iconName:"chatbubble",text:"Todo"})}}})]}):Object(N.jsx)(t.Screen,{name:"Login",component:me,options:{unmountOnBlur:e.loggedIn,tabBarIcon:function(e){var t=e.focused;return Object(N.jsx)(z,{focused:t,iconName:"chatbubble",text:"Login"})}}})})})}})})})})}},308:function(e,t,n){e.exports=n(440)}},[[308,1,2]]]);
//# sourceMappingURL=app.f6053075.chunk.js.map